<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FracShr - Learn Trading, Go Pro</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content="FracShr is a trading platform that helps users learn from beginner to pro. FracShr Pro is a zero commission trading app launching soon on iOS and Android.">
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@700;400&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #101522;
            --secondary: #FFD600;
            --accent: #00BFAE;
            --white: #fff;
            --gray: #1A1F2B;
            --green: #00BFAE;
            --red: #FF3B5C;
        }
        html, body {
            margin: 0;
            padding: 0;
            font-family: 'Manrope', Arial, sans-serif;
            background: var(--primary);
            color: var(--white);
            min-height: 100%;
            width: 100%;
            overflow-x: hidden;
        }
        a { color: var(--secondary); text-decoration: none; }
        a:hover { text-decoration: underline; }
        /* Background Animation */
        .bg-anim {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: 0;
            pointer-events: none;
            overflow: hidden;
        }
        .candlestick, .symbol-float {
            position: absolute;
            opacity: 0.16;
            animation-timing-function: linear;
        }
        .candlestick {
            width: 12px;
            height: 38px;
            border-radius: 3px;
            background: var(--accent);
            box-shadow: 0 0 6px 2px #00BFAE40;
            animation-name: floatCandle;
        }
        .candlestick.red {
            background: var(--red);
            box-shadow: 0 0 6px 2px #FF3B5C40;
        }
        @keyframes floatCandle {
            0% { transform: translateY(110vh) scaleY(1); }
            100% { transform: translateY(-15vh) scaleY(1.1);}
        }
        .symbol-float {
            font-size: 1.5rem;
            color: var(--secondary);
            animation-name: floatSymbol;
        }
        @keyframes floatSymbol {
            0% { transform: translateY(110vh) scale(1);}
            100% { transform: translateY(-15vh) scale(1.1);}
        }
        /* Header */
        header {
            background: var(--primary);
            position: sticky;
            top: 0;
            z-index: 10;
            width: 100%;
        }
        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 16px;
        }
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 0;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .logo svg {
            height: 38px;
            width: 38px;
            vertical-align: middle;
        }
        .logo-text {
            font-size: 2rem;
            font-weight: 800;
            letter-spacing: 2px;
            color: var(--secondary);
            font-family: 'Manrope', Arial, sans-serif;
        }
        nav ul {
            list-style: none;
            display: flex;
            gap: 24px;
            margin: 0;
            padding: 0;
        }
        nav ul li a {
            color: var(--white);
            font-weight: 600;
            font-size: 1rem;
            transition: color 0.2s;
        }
        nav ul li a:hover {
            color: var(--secondary);
        }
        .btn {
            background: linear-gradient(90deg, var(--secondary), var(--accent));
            color: var(--primary);
            border: none;
            border-radius: 24px;
            padding: 12px 28px;
            font-size: 1.1rem;
            font-weight: 800;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
            box-shadow: 0 2px 12px rgba(0,0,0,0.10);
            font-family: 'Manrope', Arial, sans-serif;
        }
        .btn:active { background: var(--accent); }
        /* Hamburger for mobile */
        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
            gap: 4px;
        }
        .hamburger span {
            width: 28px;
            height: 4px;
            background: var(--secondary);
            border-radius: 2px;
            display: block;
        }
        /* Hero */
        .hero {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 60px 0 40px 0;
            position: relative;
            z-index: 2;
        }
        .hero h1 {
            font-size: 2.2rem;
            color: var(--secondary);
            margin-bottom: 14px;
            font-weight: 800;
            letter-spacing: 1px;
        }
        .hero p {
            font-size: 1.15rem;
            color: var(--white);
            margin-bottom: 18px;
            max-width: 500px;
        }
        .hero .cta {
            font-size: 1.1rem;
            margin-bottom: 18px;
            color: var(--accent);
        }
        /* Features */
        .features {
            display: flex;
            flex-wrap: wrap;
            gap: 18px;
            justify-content: center;
            margin: 40px 0 0 0;
        }
        .feature-card {
            background: var(--gray);
            border-radius: 14px;
            padding: 24px 16px;
            width: 260px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            text-align: center;
        }
        .feature-card h3 {
            color: var(--secondary);
            font-size: 1.1rem;
            margin-bottom: 8px;
        }
        .feature-card p {
            color: var(--white);
            font-size: 0.98rem;
        }
        /* How it works */
        .how-it-works {
            background: var(--gray);
            border-radius: 14px;
            padding: 28px 10px;
            margin: 40px 0;
            text-align: center;
        }
        .how-it-works h2 {
            color: var(--secondary);
            margin-bottom: 18px;
        }
        .steps {
            display: flex;
            flex-wrap: wrap;
            gap: 18px;
            justify-content: center;
        }
        .step {
            flex: 1 1 160px;
            min-width: 140px;
            max-width: 220px;
            background: var(--primary);
            border-radius: 10px;
            padding: 18px 8px;
            margin: 0 4px;
        }
        .step h4 {
            color: var(--secondary);
            margin-bottom: 6px;
            font-size: 1rem;
        }
        /* Why Sign Up */
        .why-signup {
            margin: 40px 0;
            text-align: center;
        }
        .why-signup h2 {
            color: var(--secondary);
            margin-bottom: 18px;
        }
        .why-list {
            display: flex;
            flex-wrap: wrap;
            gap: 18px;
            justify-content: center;
        }
        .why-item {
            background: var(--gray);
            border-radius: 10px;
            padding: 16px 10px;
            min-width: 140px;
            max-width: 220px;
            text-align: left;
            font-size: 0.98rem;
        }
        .why-item span {
            color: var(--secondary);
            margin-right: 8px;
        }
        /* Trading War */
        .trading-war {
            background: var(--gray);
            border-radius: 14px;
            padding: 28px 10px;
            margin: 40px 0;
            text-align: center;
        }
        .trading-war h2 {
            color: var(--secondary);
            margin-bottom: 10px;
        }
        /* FAQ */
        .faq {
            margin: 40px 0;
        }
        .faq h2 {
            color: var(--secondary);
            text-align: center;
            margin-bottom: 18px;
        }
        .faq-list {
            max-width: 700px;
            margin: 0 auto;
        }
        .faq-item {
            background: var(--gray);
            border-radius: 10px;
            margin-bottom: 10px;
            padding: 12px 14px;
        }
        .faq-item h4 {
            margin: 0 0 6px 0;
            color: var(--secondary);
            font-size: 1rem;
        }
        /* Contact */
        .contact {
            background: var(--gray);
            border-radius: 14px;
            padding: 28px 10px;
            margin: 40px 0 24px 0;
            text-align: center;
        }
        .contact h2 {
            color: var(--secondary);
            margin-bottom: 10px;
        }
        .contact p {
            color: var(--white);
        }
        /* Footer */
        footer {
            background: var(--primary);
            color: var(--secondary);
            text-align: center;
            padding: 18px 0;
            font-size: 1rem;
        }
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0; top: 0; width: 100vw; height: 100vh;
            background: rgba(16,21,34,0.97);
            align-items: center;
            justify-content: center;
            overflow-y: auto;
        }
        .modal.active {
            display: flex;
        }
        .modal-content {
            background: var(--gray);
            border-radius: 16px;
            padding: 18px 8px 8px 8px;
            width: 98vw;
            max-width: 400px;
            box-shadow: 0 2px 24px rgba(0,0,0,0.25);
            position: relative;
            margin: 24px 0;
        }
        .close-modal {
            position: absolute;
            top: 10px; right: 14px;
            background: none;
            border: none;
            color: var(--secondary);
            font-size: 1.7rem;
            cursor: pointer;
            z-index: 2;
        }
        /* Game styles */
        .game-section {
            margin-bottom: 10px;
        }
        .stock-info {
            background: var(--primary);
            border-radius: 8px;
            padding: 12px 0;
            margin-bottom: 12px;
            text-align: center;
            font-size: 1.05rem;
        }
        .stock-info span {
            display: inline-block;
            min-width: 70px;
        }
        .portfolio {
            background: var(--primary);
            border-radius: 8px;
            padding: 8px 0;
            margin-bottom: 12px;
            font-size: 1.05rem;
        }
        .portfolio div { margin-bottom: 2px; }
        .trade-actions {
            display: flex;
            gap: 6px;
            justify-content: center;
            align-items: center;
            margin-bottom: 8px;
            flex-wrap: wrap;
        }
        .qty-btn {
            background: var(--secondary);
            color: var(--primary);
            border: none;
            border-radius: 6px;
            width: 32px;
            height: 32px;
            font-size: 1.3rem;
            font-weight: 700;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            user-select: none;
        }
        .qty-btn:active { background: var(--accent); }
        .qty-display {
            width: 40px;
            text-align: center;
            font-size: 1.1rem;
            background: var(--gray);
            color: var(--white);
            border: 1px solid var(--secondary);
            border-radius: 6px;
            margin: 0 2px;
            height: 32px;
            line-height: 32px;
            display: inline-block;
        }
        .max-qty {
            font-size: 0.95rem;
            color: var(--secondary);
            margin-left: 8px;
        }
        .trade-actions button.buy, .trade-actions button.sell {
            padding: 8px 14px;
            font-size: 1rem;
            border-radius: 6px;
            margin-left: 4px;
            background: var(--secondary);
            color: var(--primary);
            font-weight: 700;
        }
        .trade-actions button.sell { background: var(--accent); color: var(--white);}
        .trade-actions button:active { background: var(--accent); }
        .trade-actions .limit-btn {
            background: #888;
            color: #222;
            cursor: not-allowed;
            opacity: 0.6;
            margin-left: 4px;
        }
        .trade-actions .limit-btn:active { background: #888; }
        .history-section {
            margin-top: 10px;
        }
        .history-title {
            color: var(--secondary);
            font-size: 1rem;
            margin-bottom: 4px;
        }
        .history-list {
            max-height: 120px;
            overflow-y: auto;
            background: var(--primary);
            border-radius: 6px;
            padding: 6px;
            font-size: 0.97rem;
        }
        .history-item {
            display: flex;
            flex-direction: column;
            border-bottom: 1px solid #222;
            margin-bottom: 4px;
            padding-bottom: 2px;
        }
        .history-item span {
            display: block;
        }
        .history-item .trade-type {
            font-weight: 700;
            color: var(--secondary);
        }
        .history-item .trade-buy {
            color: var(--secondary);
        }
        .history-item .trade-sell {
            color: var(--accent);
        }
        .history-item .trade-time {
            font-size: 0.92em;
            color: #aaa;
        }
        .history-item .trade-pl.profit {
            color: var(--green);
        }
        .history-item .trade-pl.loss {
            color: var(--red);
        }
        .level-complete {
            text-align: center;
            margin-top: 10px;
        }
        .register-interest input[type="email"] {
            padding: 8px;
            border-radius: 6px;
            border: 1px solid var(--secondary);
            background: var(--gray);
            color: var(--white);
            width: 80%;
            margin-bottom: 8px;
            font-size: 1rem;
        }
        .register-interest button {
            background: linear-gradient(90deg, var(--secondary), var(--accent));
            color: var(--primary);
            border: none;
            border-radius: 6px;
            padding: 8px 18px;
            font-weight: 700;
            cursor: pointer;
            transition: background 0.2s;
            font-size: 1rem;
        }
        .register-interest button:active { background: var(--accent); }
        .register-interest {
            margin-top: 10px;
        }
        .register-msg {
            margin-top: 8px;
            color: var(--secondary);
            font-size: 1rem;
        }
        .donate-btn {
            background: var(--accent);
            color: var(--white);
            border: none;
            border-radius: 6px;
            padding: 10px 22px;
            font-weight: 700;
            cursor: pointer;
            font-size: 1.1rem;
            margin-top: 18px;
            margin-bottom: 8px;
            transition: background 0.2s;
        }
        .donate-btn:active { background: var(--secondary); color: var(--primary);}
        /* Donate Modal */
        .donate-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0; top: 0; width: 100vw; height: 100vh;
            background: rgba(16,21,34,0.97);
            align-items: center;
            justify-content: center;
        }
        .donate-modal.active {
            display: flex;
        }
        .donate-modal-content {
            background: var(--gray);
            border-radius: 16px;
            padding: 24px 18px;
            width: 95vw;
            max-width: 340px;
            box-shadow: 0 2px 24px rgba(0,0,0,0.25);
            position: relative;
            text-align: center;
        }
        .close-donate-modal {
            position: absolute;
            top: 10px; right: 14px;
            background: none;
            border: none;
            color: var(--secondary);
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 2;
        }
        .donate-link {
            display: inline-block;
            background: linear-gradient(90deg, var(--secondary), var(--accent));
            color: var(--primary);
            font-weight: 700;
            border-radius: 6px;
            padding: 8px 18px;
            margin-top: 12px;
            text-decoration: none;
            font-size: 1.1rem;
        }
        .donate-link:active { background: var(--accent); }
        /* Tooltip for limit order */
        .limit-tooltip {
            position: fixed;
            left: 50%;
            top: 50%;
            transform: translate(-50%,-50%);
            background: var(--gray);
            color: var(--secondary);
            border-radius: 10px;
            padding: 18px 18px;
            font-size: 1.1rem;
            z-index: 3000;
            box-shadow: 0 2px 24px rgba(0,0,0,0.25);
            text-align: center;
            min-width: 180px;
        }
        .limit-tooltip button {
            margin-top: 10px;
            background: var(--secondary);
            color: var(--primary);
            border: none;
            border-radius: 6px;
            padding: 6px 16px;
            font-weight: 700;
            cursor: pointer;
            font-size: 1rem;
        }
        @media (max-width: 900px) {
            .features, .why-list, .steps {
                flex-direction: column;
                align-items: center;
            }
            .feature-card, .why-item, .step {
                width: 95vw;
                max-width: 350px;
            }
        }
        @media (max-width: 600px) {
            .container { padding: 0 4px; }
            .hero h1 { font-size: 1.3rem; }
            nav ul { display: none; }
            .hamburger { display: flex; }
            .modal-content { max-width: 99vw; }
        }
        nav.open ul {
            display: flex;
            flex-direction: column;
            position: absolute;
            top: 60px;
            left: 0;
            width: 100vw;
            background: var(--gray);
            z-index: 100;
            gap: 0;
        }
        nav.open ul li {
            border-bottom: 1px solid #222;
            padding: 12px 0;
            text-align: center;
        }
    </style>
</head>
<body>
    <!-- Background Animation -->
    <div class="bg-anim" id="bgAnim"></div>

    <!-- Header -->
    <header>
        <div class="container">
            <nav id="mainNav">
                <div class="logo">
                    <!-- Futuristic Candlestick "F" Logo -->
                    <svg viewBox="0 0 48 48" fill="none">
                        <rect x="2" y="2" width="44" height="44" rx="12" fill="url(#g1)" />
                        <!-- F as candlestick -->
                        <rect x="14" y="12" width="6" height="24" rx="3" fill="#FFD600"/>
                        <rect x="22" y="12" width="12" height="6" rx="3" fill="#00BFAE"/>
                        <rect x="22" y="22" width="10" height="6" rx="3" fill="#FFD600"/>
                        <defs>
                            <linearGradient id="g1" x1="0" y1="0" x2="48" y2="48" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#101522"/>
                                <stop offset="1" stop-color="#1A1F2B"/>
                            </linearGradient>
                        </defs>
                    </svg>
                    <span class="logo-text">FracShr</span>
                </div>
                <ul>
                    <li><a href="#features">Features</a></li>
                    <li><a href="#how">How It Works</a></li>
                    <li><a href="#why">Why Sign Up</a></li>
                    <li><a href="#tradingwar">Trading War</a></li>
                    <li><a href="#faq">FAQ</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
                <button class="btn" id="demoBtn">Try Demo Game</button>
                <div class="hamburger" id="hamburger" aria-label="Open menu" tabindex="0">
                    <span></span><span></span><span></span>
                </div>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <h1>Learn Trading. Go Pro.<br>With FracShr</h1>
        <p>
            <b>FracShr</b> is a trading platform that helps users learn trading from beginner to pro level with interactive, level-based tutorials and real market scenarios.
        </p>
        <div class="cta">
            <b>FracShr Pro</b> is a <span style="color:var(--accent)">zero commission</span> trading app launching soon on iOS and Android.<br>
            <span style="color:var(--secondary)">Register your interest to be updated!</span>
        </div>
        <button class="btn" id="heroDemoBtn">Try Demo Game</button>
    </section>

    <!-- Features -->
    <section class="container" id="features">
        <div class="features">
            <div class="feature-card">
                <h3>Learn by Playing</h3>
                <p>Step-by-step tutorials and level-based challenges teach you everything from trading basics to advanced strategies.</p>
            </div>
            <div class="feature-card">
                <h3>Realistic Trading</h3>
                <p>Trade with real-time simulated prices, advanced charts, and all the tools used by professional traders.</p>
            </div>
            <div class="feature-card">
                <h3>Compete & Win</h3>
                <p>Challenge friends or global players in Trading Wars. Climb the leaderboard and prove your trading skills.</p>
            </div>
            <div class="feature-card">
                <h3>Instant Feedback</h3>
                <p>Get instant feedback on your trades, see your profit/loss, and learn from every scenario.</p>
            </div>
            <div class="feature-card">
                <h3>Mobile Ready</h3>
                <p>Coming soon to iOS and Android. Play anywhere, anytime, and keep leveling up your trading game.</p>
            </div>
        </div>
    </section>

    <!-- How It Works -->
    <section class="container how-it-works" id="how">
        <h2>How It Works</h2>
        <div class="steps">
            <div class="step">
                <h4>1. Sign Up</h4>
                <p>Create your free account and start your trading journey.</p>
            </div>
            <div class="step">
                <h4>2. Learn & Play</h4>
                <p>Follow interactive tutorials, complete levels, and master trading concepts.</p>
            </div>
            <div class="step">
                <h4>3. Practice & Compete</h4>
                <p>Test your skills in real scenarios and challenge others in Trading Wars.</p>
            </div>
            <div class="step">
                <h4>4. Track Progress</h4>
                <p>Monitor your growth, unlock achievements, and climb the leaderboard.</p>
            </div>
        </div>
    </section>

    <!-- Why Sign Up -->
    <section class="container why-signup" id="why">
        <h2>Why Sign Up for FracShr?</h2>
        <div class="why-list">
            <div class="why-item"><span>âœ”</span> Gamified learning makes trading fun and easy to understand.</div>
            <div class="why-item"><span>âœ”</span> No risk â€“ trade with virtual cash and real market scenarios.</div>
            <div class="why-item"><span>âœ”</span> Compete with friends and global players for rewards.</div>
            <div class="why-item"><span>âœ”</span> Unlock advanced trading tools and analytics as you level up.</div>
            <div class="why-item"><span>âœ”</span> Prepare for real-world trading with confidence and skill.</div>
        </div>
    </section>

    <!-- Trading War -->
    <section class="container trading-war" id="tradingwar">
        <h2>ðŸ”¥ Trading War Mode</h2>
        <p>
            Invite friends or challenge global players in a time-based trading war. Each player starts with the same virtual cash and a set time. The trader with the highest profit at the end wins! <br>
            <b>Are you ready to prove your trading skills?</b>
        </p>
    </section>

    <!-- FAQ -->
    <section class="container faq" id="faq">
        <h2>Frequently Asked Questions</h2>
        <div class="faq-list">
            <div class="faq-item">
                <h4>Is FracShr free to play?</h4>
                <p>Yes! FracShr is free to play. You can learn and compete without any risk.</p>
            </div>
            <div class="faq-item">
                <h4>Do I need trading experience?</h4>
                <p>No prior experience needed. FracShr is designed for everyone, from beginners to pros.</p>
            </div>
            <div class="faq-item">
                <h4>How realistic is the trading simulation?</h4>
                <p>We use real market data and advanced trading features to make the experience as close to real trading as possible.</p>
            </div>
            <div class="faq-item">
                <h4>When will the mobile app launch?</h4>
                <p>FracShr Pro for iOS and Android is launching soon! Register your interest to be the first to know.</p>
            </div>
        </div>
    </section>

    <!-- Contact -->
    <section class="container contact" id="contact">
        <h2>Contact Us</h2>
        <p>Have questions or want to partner with us? Email <a href="mailto:info@fracshr.com">info@fracshr.com</a></p>
    </section>

    <!-- Footer -->
    <footer>
        &copy; 2025 FracShr. All rights reserved.
    </footer>

    <!-- Demo Game Modal -->
    <div class="modal" id="demoModal" aria-modal="true" role="dialog">
        <div class="modal-content">
            <button class="close-modal" id="closeModalBtn" title="Close" aria-label="Close">&times;</button>
            <div class="game-section" id="gameSection">
                <!-- Game will be rendered here -->
            </div>
        </div>
    </div>

    <!-- Donate Modal -->
    <div class="donate-modal" id="donateModal">
        <div class="donate-modal-content">
            <button class="close-donate-modal" id="closeDonateBtn" title="Close" aria-label="Close">&times;</button>
            <h2 style="color:var(--secondary);margin-bottom:10px;">Support FracShr</h2>
            <p>Your donation helps us build a better, more accessible trading education platform for everyone.<br>Thank you for supporting our mission!</p>
            <a class="donate-link" href="https://www.buymeacoffee.com/" target="_blank" rel="noopener">Donate Now</a>
        </div>
    </div>

    <!-- Limit Tooltip -->
    <div id="limitTooltip" class="limit-tooltip" style="display:none;">
        <div>This feature unlocks in the next level!</div>
        <button onclick="closeLimitTooltip()">OK</button>
    </div>

    <script>
        // Hamburger menu for mobile
        const nav = document.getElementById('mainNav');
        const hamburger = document.getElementById('hamburger');
        hamburger.addEventListener('click', function() {
            nav.classList.toggle('open');
        });
        hamburger.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' || e.key === ' ') nav.classList.toggle('open');
        });
        nav.querySelectorAll('ul li a').forEach(link => {
            link.addEventListener('click', () => nav.classList.remove('open'));
        });

        // Modal logic
        const demoModal = document.getElementById('demoModal');
        const demoBtn = document.getElementById('demoBtn');
        const heroDemoBtn = document.getElementById('heroDemoBtn');
        const closeModalBtn = document.getElementById('closeModalBtn');
        [demoBtn, heroDemoBtn].forEach(btn => btn.addEventListener('click', () => {
            demoModal.classList.add('active');
            document.body.style.overflow = 'hidden';
            startDemoGame();
        }));
        closeModalBtn.addEventListener('click', () => {
            demoModal.classList.remove('active');
            document.body.style.overflow = '';
            stopDemoGame();
        });
        window.addEventListener('click', (e) => {
            if (e.target === demoModal) {
                demoModal.classList.remove('active');
                document.body.style.overflow = '';
                stopDemoGame();
            }
        });

        // Donate modal logic
        const donateModal = document.getElementById('donateModal');
        const closeDonateBtn = document.getElementById('closeDonateBtn');
        closeDonateBtn.addEventListener('click', () => {
            donateModal.classList.remove('active');
            document.body.style.overflow = '';
        });
        window.addEventListener('click', (e) => {
            if (e.target === donateModal) {
                donateModal.classList.remove('active');
                document.body.style.overflow = '';
            }
        });

        // Limit tooltip logic
        function showLimitTooltip() {
            document.getElementById('limitTooltip').style.display = 'block';
        }
        function closeLimitTooltip() {
            document.getElementById('limitTooltip').style.display = 'none';
        }
        window.closeLimitTooltip = closeLimitTooltip;

        // Game state
        let cash, shares, price, history, lastTradePrice, levelComplete, intervalId, qty, buyHistory;

        function startDemoGame() {
            cash = 10000;
            shares = 0;
            price = 500;
            history = [];
            buyHistory = [];
            lastTradePrice = null;
            levelComplete = false;
            qty = 1;
            renderGame();
            intervalId = setInterval(updatePrice, 7000);
        }
        function stopDemoGame() {
            clearInterval(intervalId);
            document.getElementById('gameSection').innerHTML = '';
        }

        function getPortfolioValue() {
            return cash + shares * price;
        }

        function getMaxBuyQty() {
            return Math.floor(cash / price);
        }

        function renderGame() {
            const section = document.getElementById('gameSection');
            if (levelComplete) {
                section.innerHTML = `
                    <div class="level-complete">
                        <h2>ðŸŽ‰ Congratulations!</h2>
                        <p>You grew your portfolio to $11,000 or more.<br>
                        <b>Register your interest to keep playing as soon as the app launches on iOS and Android!</b></p>
                        <div class="register-interest">
                            <input type="email" id="registerEmail" placeholder="Enter your email" required>
                            <br>
                            <button onclick="registerInterest()">Register Interest</button>
                            <div class="register-msg" id="registerMsg"></div>
                        </div>
                        <button class="donate-btn" onclick="openDonateModal()">Donate</button>
                    </div>
                `;
                clearInterval(intervalId);
                return;
            }
            const maxBuyQty = getMaxBuyQty();
            if (qty > maxBuyQty && maxBuyQty > 0) qty = maxBuyQty;
            if (qty < 1) qty = 1;
            section.innerHTML = `
                <div class="stock-info">
                    <div><span><b>Stock:</b></span> FRACSHR</div>
                    <div><span><b>Price:</b></span> $${price.toFixed(2)}</div>
                </div>
                <div class="portfolio">
                    <div><b>Cash:</b> $${cash.toFixed(2)}</div>
                    <div><b>Shares Owned:</b> ${shares}</div>
                    <div><b>Portfolio Value:</b> $${getPortfolioValue().toFixed(2)}</div>
                    <div><b>Profit/Loss:</b> <span style="color:${getPortfolioValue()-10000>=0?'#00BFAE':'#FF3B5C'};">
                        $${(getPortfolioValue()-10000).toFixed(2)}
                    </span></div>
                </div>
                <div class="trade-actions">
                    <button class="qty-btn" onclick="changeQty(-1)" aria-label="Decrease quantity">-</button>
                    <span class="qty-display" id="qtyDisplay">${qty}</span>
                    <button class="qty-btn" onclick="changeQty(1)" aria-label="Increase quantity">+</button>
                    <span class="max-qty">Max: ${maxBuyQty}</span>
                </div>
                <div class="trade-actions">
                    <button class="buy" onclick="buyShares()">Buy</button>
                    <button class="sell" onclick="sellShares()">Sell</button>
                    <button class="limit-btn" onclick="showLimitTooltip()" disabled>Limit Buy</button>
                    <button class="limit-btn" onclick="showLimitTooltip()" disabled>Limit Sell</button>
                </div>
                <div style="text-align:center;font-size:0.97rem;color:var(--secondary);margin-bottom:6px;">
                    Buy shares and sell at a higher price.<br>
                    Price updates every 7 seconds.<br>
                    Take your portfolio to $11,000 to proceed!
                </div>
                <div class="history-section">
                    <div class="history-title">Trade History</div>
                    <div class="history-list" id="historyList">
                        ${history.length === 0 ? '<div style="color:#888;">No trades yet.</div>' : history.map(item => `
                            <div class="history-item">
                                <span class="trade-type ${item.type === 'Buy' ? 'trade-buy' : 'trade-sell'}">${item.type} ${item.qty} @ $${item.price.toFixed(2)}</span>
                                <span>Time: <span class="trade-time">${item.time}</span></span>
                                ${item.type === 'Sell' ? `<span>Purchased @ $${item.purchasePrice.toFixed(2)}</span>
                                <span class="trade-pl ${item.result}">${item.result === 'profit' ? 'Profit' : 'Loss'}: $${item.pl.toFixed(2)}</span>` : ''}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        // Quantity change
        window.changeQty = function(delta) {
            const maxBuyQty = getMaxBuyQty();
            qty += delta;
            if (qty < 1) qty = 1;
            if (qty > 999) qty = 999;
            if (qty > maxBuyQty && maxBuyQty > 0) qty = maxBuyQty;
            document.getElementById('qtyDisplay').textContent = qty;
        };

        // Buy shares
        window.buyShares = function() {
            if (levelComplete) return;
            const maxBuyQty = getMaxBuyQty();
            if (qty > maxBuyQty) return alert('Not enough cash!');
            const cost = qty * price;
            if (cost > cash) return alert('Not enough cash!');
            cash -= cost;
            shares += qty;
            // Save buy for history
            const now = new Date();
            const time = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', second:'2-digit'});
            buyHistory.push({qty: qty, price: price, time: time});
            history.unshift({
                type: 'Buy',
                qty: qty,
                price: price,
                time: time
            });
            lastTradePrice = price;
            renderGame();
            checkLevel();
        };

        // Sell shares
        window.sellShares = function() {
            if (levelComplete) return;
            if (qty > shares) return alert('Not enough shares!');
            const revenue = qty * price;
            cash += revenue;
            shares -= qty;
            // Find the most recent buy for this qty
            let purchasePrice = lastTradePrice || price;
            let buyQtyLeft = qty;
            let avgPurchasePrice = 0;
            let totalCost = 0;
            let usedBuys = [];
            // FIFO: use buyHistory to get average purchase price for qty sold
            for (let i = buyHistory.length - 1; i >= 0 && buyQtyLeft > 0; i--) {
                let b = buyHistory[i];
                if (b.qty <= buyQtyLeft) {
                    totalCost += b.qty * b.price;
                    buyQtyLeft -= b.qty;
                    usedBuys.push(i);
                } else {
                    totalCost += buyQtyLeft * b.price;
                    buyHistory[i].qty -= buyQtyLeft;
                    buyQtyLeft = 0;
                }
            }
            avgPurchasePrice = totalCost / qty || price;
            // Remove used buys
            for (let idx of usedBuys) buyHistory.splice(idx, 1);
            const now = new Date();
            const time = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', second:'2-digit'});
            let pl = (price - avgPurchasePrice) * qty;
            let result = pl >= 0 ? 'profit' : 'loss';
            history.unshift({
                type: 'Sell',
                qty: qty,
                price: price,
                purchasePrice: avgPurchasePrice,
                pl: pl,
                result: result,
                time: time
            });
            lastTradePrice = price;
            renderGame();
            checkLevel();
        };

        // Price update every 7 seconds
        function updatePrice() {
            // Simulate price change: -2% to +2%
            const change = (Math.random() - 0.5) * 4;
            price = Math.max(100, price * (1 + change / 100));
            renderGame();
            checkLevel();
        }

        function checkLevel() {
            if (getPortfolioValue() >= 11000 && !levelComplete) {
                levelComplete = true;
                renderGame();
            }
        }

        // Register interest
        window.registerInterest = function() {
            const email = document.getElementById('registerEmail').value.trim();
            const msgDiv = document.getElementById('registerMsg');
            if (!email || !/^[^@]+@[^@]+\.[^@]+$/.test(email)) {
                msgDiv.textContent = "Please enter a valid email.";
                return;
            }
            msgDiv.textContent = "Thank you! We'll notify you at launch.";
            document.getElementById('registerEmail').disabled = true;
        };

        // Donate modal
        window.openDonateModal = function() {
            document.getElementById('donateModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        };

        // Background animation: candlesticks and symbols
        function randomBetween(a, b) {
            return a + Math.random() * (b - a);
        }
        function createBgAnim() {
            const bg = document.getElementById('bgAnim');
            const symbols = ['AAPL', 'TSLA', 'GOOGL', 'MSFT', 'AMZN', 'ðŸ’¹', 'ðŸ“ˆ', 'ðŸ“‰', 'ðŸ’²'];
            for (let i = 0; i < 16; i++) {
                // Candlestick
                const c = document.createElement('div');
                c.className = 'candlestick' + (Math.random() > 0.5 ? ' red' : '');
                c.style.left = randomBetween(0, 98) + 'vw';
                c.style.animationDuration = randomBetween(8, 18) + 's';
                c.style.animationDelay = (-1 * randomBetween(0, 18)) + 's';
                bg.appendChild(c);
            }
            for (let i = 0; i < 12; i++) {
                // Symbol
                const s = document.createElement('div');
                s.className = 'symbol-float';
                s.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                s.style.left = randomBetween(0, 96) + 'vw';
                s.style.fontSize = randomBetween(1.1, 2.1) + 'rem';
                s.style.animationDuration = randomBetween(10, 22) + 's';
                s.style.animationDelay = (-1 * randomBetween(0, 22)) + 's';
                bg.appendChild(s);
            }
        }
        createBgAnim();
    </script>
</body>
</html>
